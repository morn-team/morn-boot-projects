(window.webpackJsonp=window.webpackJsonp||[]).push([[18],{364:function(t,a,s){"use strict";s.r(a);var e=s(42),n=Object(e.a)({},(function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h1",{attrs:{id:"paramsvalidation-参数校验"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#paramsvalidation-参数校验"}},[t._v("#")]),t._v(" ParamsValidation 参数校验")]),t._v(" "),s("p",[t._v("MornBoot提供参数自动校验功能，事实上Spring对参数校验的支持已经非常完善了，而MornBoot不仅支持"),s("a",{attrs:{href:"https://docs.spring.io/spring/docs/4.3.23.RELEASE/spring-framework-reference/htmlsingle/#validation",target:"_blank",rel:"noopener noreferrer"}},[t._v("SpringValidation"),s("OutboundLink")],1),t._v("所有的校验方式，同时完成了对校验结果的自动处理。")]),t._v(" "),s("blockquote",[s("p",[t._v("Since：v1.2.0")])]),t._v(" "),s("h3",{attrs:{id:"必要配置"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#必要配置"}},[t._v("#")]),t._v(" 必要配置")]),t._v(" "),s("p",[t._v("application.properties")]),t._v(" "),s("div",{staticClass:"language-properties extra-class"},[s("pre",{pre:!0,attrs:{class:"language-properties"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#开启异常处理（默认）")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("morn.exception.enabled")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[t._v("true")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#开启异常解释器")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("morn.exception-interpreter.enabled")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[t._v("true")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#开启参数校验异常解释器")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("morn.exception-interpreter.validate.enabled")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[t._v("true")]),t._v("\n")])])]),s("h3",{attrs:{id:"推荐配置"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#推荐配置"}},[t._v("#")]),t._v(" 推荐配置")]),t._v(" "),s("p",[t._v("Maven")]),t._v(" "),s("div",{staticClass:"language-xml extra-class"},[s("pre",{pre:!0,attrs:{class:"language-xml"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("\x3c!--支持更多校验异常--\x3e")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("dependency")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("groupId")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("site.morn.boot"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("groupId")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("artifactId")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("morn-boot-interpreter"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("artifactId")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("version")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("${morn.version}"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("version")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("dependency")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n")])])]),s("h3",{attrs:{id:"校验规则"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#校验规则"}},[t._v("#")]),t._v(" 校验规则")]),t._v(" "),s("p",[t._v("Entity - 使用注解约束实体类属性")]),t._v(" "),s("ul",[s("li",[t._v("支持javax.validation注解")]),t._v(" "),s("li",[t._v("支持hibernate.validator注解")])]),t._v(" "),s("div",{staticClass:"language-java_holder_method_tree extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("@NotNull(groups = {Add.class, Update.class, Login.class})\n@Size(min = 4, max = 32)\nprivate String username;\n\n@NotNull(groups = {Add.class, Login.class})\n@Size(min = 4, max = 64)\nprivate String password;\n")])])]),s("h3",{attrs:{id:"分类校验"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#分类校验"}},[t._v("#")]),t._v(" 分类校验")]),t._v(" "),s("p",[t._v("Controller - 使用Validated注解校验参，MornBoot内置一些校验组，用于区分不同业务场景")]),t._v(" "),s("ul",[s("li",[t._v("Add")]),t._v(" "),s("li",[t._v("Delete")]),t._v(" "),s("li",[t._v("Login")]),t._v(" "),s("li",[t._v("Operate")]),t._v(" "),s("li",[t._v("Patch")]),t._v(" "),s("li",[t._v("Put")]),t._v(" "),s("li",[t._v("Query")]),t._v(" "),s("li",[t._v("Search")]),t._v(" "),s("li",[t._v("Update")])]),t._v(" "),s("div",{staticClass:"language-java_holder_method_tree extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v('@PostMapping("/login")\npublic Object login(@Validated(Login.class) User user) {\n    return RestBuilders.successMessage(); // 校验失败时，此处代码不会执行\n}\n')])])]),s("h3",{attrs:{id:"参数校验"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#参数校验"}},[t._v("#")]),t._v(" 参数校验")]),t._v(" "),s("p",[t._v("发送请求：")]),t._v(" "),s("div",{staticClass:"language-text extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("curl -X POST \\\n  http://localhost:8080/login \\\n  -d password=123\n")])])]),s("p",[t._v("输出结果：")]),t._v(" "),s("blockquote",[s("p",[t._v("输出内容支持国际化，属性的国际化将在后续版本中支持")])]),t._v(" "),s("div",{staticClass:"language-text extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("user.password个数必须在4和32之间,user.username不能为null\n\n密码个数必须在4和32之间,用户名不能为null [expect]\n")])])])])}),[],!1,null,null,null);a.default=n.exports}}]);